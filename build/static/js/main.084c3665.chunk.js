(this["webpackJsonpcrud-redux"]=this["webpackJsonpcrud-redux"]||[]).push([[0],{46:function(e,t,r){},86:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(21),o=r.n(a),s=(r(46),r(12)),u=r(1),l=function(){return Object(u.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary justify-ccontent-between",children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h1",{className:"text-light",children:Object(u.jsx)(s.b,{to:"/",className:"text-light",children:"CRUD React, Redux, REST API & Axios"})}),Object(u.jsx)(s.b,{className:"btn btn-danger nuevo-post d-block w-100 d-md-inline-block",to:"/productos/nuevo",children:"Agregar Producto +"})]})})},i=r(4),d=r(5),b=r(11),p=r.n(b),j=r(19),O=r(41),m=r(2),h=r(39),x=r.n(h).a.create({baseURL:"https://json-server-project-personal.herokuapp.com"}),f=r(14),v=r.n(f),y={productos:[],error:null,loading:!1,productoEliminar:null,productoEditar:null},E="AGREGAR_PRODUCTO",g="AGREGAR_PRODUCTO_EXITO",N="AGREGAR_PRODUCTO_ERROR",R="COMENZAR_DESCARGA_PRODUCTOS",C="DESCARGA_PRODUCTOS_EXITO",_="DESCARGA_PRODUCTOS_ERROR",A="OBTENER_PRODUCTO_ELIMINAR",P="ELIMINAR_PRODUCTO_EXITO",T="ELIMINAR_PRODUCTO_ERROR",w="OBTENER_PRODUCTO_EDITADO",D="EDITAR_PRODUCTO_EXITO",k="EDITAR_PRODUCTO_ERROR";var S=function(e){var t=e.producto,r=t.nombre,c=t.precio,n=t.id,a=Object(d.b)(),o=Object(i.f)(),s=function(e){v.a.fire({title:"Estas Seguro?",text:"Un producto que se elimina no se puede recuperar",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&a(function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:A,payload:e}),t.prev=1,t.next=4,x.delete("/productos/".concat(e));case 4:r({type:P}),v.a.fire("Eliminado!","El producto se elimino correctamente","success"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({type:T,payload:!0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))}))},l=function(e){a(function(e){return function(t){t({type:w,payload:e})}}(e)),o.push("/productos/editar/".concat(e.id))};return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:r}),Object(u.jsx)("td",{children:Object(u.jsxs)("span",{className:"font-weight-bold",children:["$ ",c," "]})}),Object(u.jsxs)("td",{className:"aacciones",children:[Object(u.jsx)("button",{type:"button",className:"btn btn-primary mr-2",onClick:function(){return l(t)},children:"Editar"}),Object(u.jsx)("button",{className:"btn btn-danger",type:"button",onClick:function(){return s(n)},children:"Eliminar"})]})]},n)},I=function(){var e=Object(d.b)();n.a.useEffect((function(){e(function(){var e=Object(j.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:R,payload:!0}),e.prev=1,e.next=4,x.get("/productos");case 4:r=e.sent,t({type:C,payload:r.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:_,payload:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var t=Object(d.c)((function(e){return e.productos.productos})),r=Object(d.c)((function(e){return e.productos.error})),c=Object(d.c)((function(e){return e.productos.loading}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{className:"text-center my-5",children:"Listado de Productos"}),r?Object(u.jsx)("p",{className:"font-weight-bold alert alert-danger text-center mt-4",children:"Hubo un error"}):null,c?Object(u.jsx)("p",{className:"text-center",children:"Cargando"}):null,Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{className:"bg-primary table-dark",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"Nombre"}),Object(u.jsx)("th",{scope:"col",children:"Precio"}),Object(u.jsx)("th",{scope:"col",children:"Acciones"})]})}),Object(u.jsx)("tbody",{children:0===t.length?Object(u.jsx)("tr",{children:Object(u.jsx)("td",{"col-span":"3",children:"No hay productos"})}):t.map((function(e){return Object(u.jsx)(S,{producto:e},e.id)}))})]})]})},U=r(18),G=r(88),L={alerta:null},B="MOSTRAR_ALERTA",M="OCULTAR_ALERTA";var X=function(e){var t=e.history,r=n.a.useState(""),c=Object(U.a)(r,2),a=c[0],o=c[1],s=n.a.useState(0),l=Object(U.a)(s,2),i=l[0],b=l[1],O=Object(d.c)((function(e){return e.productos.loading})),m=Object(d.c)((function(e){return e.productos.error})),h=Object(d.c)((function(e){return e.alertas.alerta})),f=Object(d.b)(),y=function(e){return f(function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r,c){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:E,payload:!0}),t.prev=1,c().productos.productos.push(e),t.next=6,x.post("/productos",e);case 6:r({type:g,payload:e}),v.a.fire("Correcto","El producto se agrego correctamente","success"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),r({type:N,payload:!0}),v.a.fire({icon:"error",title:"Hubo un error",text:"Hubo un error, intenta de nuevo"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r){return t.apply(this,arguments)}}()}(e))},R=function(e){if(e.preventDefault(),!a.trim()||i<=0){f(function(e){return function(t){t({type:B,payload:e})}}({msg:"Todos los campos son obligatorios",classes:"alert alert-danger text-center text-uppercase p-3"}))}else f((function(e){e({type:M})})),y({nombre:a,precio:i,id:Object(G.a)()}),t.push("/")};return Object(u.jsx)("div",{className:"row justify-content-center",children:Object(u.jsx)("div",{className:"col-md-8",children:Object(u.jsx)("div",{className:"card",children:Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h2",{className:"text-center mb-4 font-weight-bold",children:"Agregar Nuevo Producto"}),h?Object(u.jsx)("p",{className:h.classes,children:h.msg}):null,Object(u.jsxs)("form",{onSubmit:function(e){return R(e)},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"nombre",children:"Nombre Producto"}),Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre Producto",name:"nombre",value:a,onChange:function(e){return o(e.target.value)}})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"precio",children:"Precio Producto"}),Object(u.jsx)("input",{type:"number",min:0,className:"form-control",placeholder:"Precio Producto",name:"precio",value:i,onChange:function(e){return b(Number(e.target.value))}})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary font-weight-bold text-uppercase d-block w-100",children:"Agregar"})]}),O?Object(u.jsx)("p",{className:"mt-4 p-2 text-center",children:"Cargando..."}):null,m?Object(u.jsx)("p",{className:"alert alert-danger p-2 mt-4 text-center",children:"Hubo un error"}):null]})})})})},F=r(17),H=function(){var e=Object(d.c)((function(e){return e.productos.productoEditar})),t=Object(d.b)(),r=Object(i.f)(),c=n.a.useState({nombre:"",precio:""}),a=Object(U.a)(c,2),o=a[0],s=a[1];n.a.useEffect((function(){s(e)}),[e]),e||r.push("/");var l=o.nombre,b=o.precio;return Object(u.jsx)("div",{className:"row justify-content-center",children:Object(u.jsx)("div",{className:"col-md-8",children:Object(u.jsx)("div",{className:"card",children:Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h2",{className:"text-center mb-4 font-weight-bold",children:"Editar Producto"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),!l.trim()||b<=0||(t(function(e){return function(){var t=Object(j.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"COMENZAR_EDICION_PRODUCTO"}),t.prev=1,t.next=4,x.put("/productos/".concat(e.id),e);case 4:r({type:D,payload:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r({type:k,payload:!0});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}(o)),r.push("/"))},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"nombre",children:"Nombre Producto"}),Object(u.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre Producto",name:"nombre",value:l,onChange:function(e){return s(Object(m.a)(Object(m.a)({},o),{},Object(F.a)({},e.target.name,e.target.value)))}})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"precio",children:"Precio Producto"}),Object(u.jsx)("input",{type:"number",min:0,className:"form-control",placeholder:"Precio Producto",name:"precio",value:b,onChange:function(e){return s(Object(m.a)(Object(m.a)({},o),{},Object(F.a)({},e.target.name,Number(e.target.value))))}})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary font-weight-bold text-uppercase d-block w-100",children:"Guardar Cambios"})]})]})})})})};var J=function(){return Object(u.jsxs)(s.a,{children:[Object(u.jsx)(l,{}),Object(u.jsx)("div",{className:"container mt-5",children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{exact:!0,path:"/",component:I}),Object(u.jsx)(i.a,{exact:!0,path:"/productos/nuevo",component:X}),Object(u.jsx)(i.a,{exact:!0,path:"/productos/editar/:id",component:H})]})})]})},Z=r(20),q=r(40),V=Object(Z.b)({productos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:case E:return Object(m.a)(Object(m.a)({},e),{},{loading:t.payload,productoEliminar:null,productoEditar:null});case g:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,productos:[].concat(Object(O.a)(e.productos),[t.payload]),error:null,productoEliminar:null,productoEditar:null});case k:case T:case _:case N:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,error:t.payload,productoEliminar:null,productoEditar:null});case C:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,error:null,productos:t.payload,productoEliminar:null,productoEditar:null});case A:return Object(m.a)(Object(m.a)({},e),{},{productoEliminar:t.payload});case P:return Object(m.a)(Object(m.a)({},e),{},{productos:e.productos.filter((function(t){return t.id!==e.productoEliminar})),productoEliminar:null,productoEditar:null});case w:return Object(m.a)(Object(m.a)({},e),{},{productoEditar:t.payload});case D:return Object(m.a)(Object(m.a)({},e),{},{productos:e.productos.map((function(e){return e.id===t.payload.id?e=t.payload:e})),productoEditar:null,productoEliminar:null});default:return e}},alertas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(m.a)(Object(m.a)({},e),{},{alerta:t.payload});case M:return Object(m.a)(Object(m.a)({},e),{},{alerta:null});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Z.c;var z=Object(Z.d)(V,$(Object(Z.a)(q.a)));o.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(d.a,{store:z,children:Object(u.jsx)(J,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.084c3665.chunk.js.map